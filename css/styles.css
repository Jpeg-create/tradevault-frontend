@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600&display=swap');

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --bg-base:      #070707;
  --bg-surface:   #0d0d0d;
  --bg-card:      #141414;
  --bg-elevated:  #1a1a1a;
  --bg-overlay:   #222222;
  --bg-input:     #111111;
  --orange:       #FF6535;
  --orange-dim:   rgba(255,101,53,0.10);
  --orange-glow:  rgba(255,101,53,0.30);
  --orange-light: #FF8A65;
  --pink:         #FF2D6B;
  --pink-dim:     rgba(255,45,107,0.10);
  --green:        #30D158;
  --green-dim:    rgba(48,209,88,0.10);
  --red:          #FF3B30;
  --red-dim:      rgba(255,59,48,0.10);
  --amber:        #FF9F0A;
  --amber-dim:    rgba(255,159,10,0.10);
  --purple:       #BF5AF2;
  --blue:         #0A84FF;
  --teal:         #5AC8FA;
  --text-primary:   #F5F5F7;
  --text-secondary: #6E6E73;
  --text-muted:     #3A3A3C;
  --border:         rgba(255,255,255,0.07);
  --border-soft:    rgba(255,255,255,0.04);
  --border-bright:  rgba(255,255,255,0.13);
  --border-orange:  rgba(255,101,53,0.22);
  --shadow-card:  0 4px 24px rgba(0,0,0,0.5);
  --shadow-modal: 0 32px 80px rgba(0,0,0,0.8);
  --r-sm:  6px; --r-md:  10px; --r-lg:  16px; --r-xl:  20px; --r-2xl: 28px;
  --sidebar-w: 224px;
  --ease: cubic-bezier(0.4,0,0.2,1);
}

html { scroll-behavior:smooth; }
body {
  font-family:'Plus Jakarta Sans',sans-serif;
  background:var(--bg-base);
  color:var(--text-primary);
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
}
body::before {
  content:''; position:fixed; inset:0;
  background:
    radial-gradient(ellipse 70% 40% at 15% 0%,   rgba(255,101,53,0.04)  0%,transparent 60%),
    radial-gradient(ellipse 50% 35% at 85% 100%,  rgba(255,45,107,0.03) 0%,transparent 60%);
  pointer-events:none; z-index:0;
}

@keyframes fadeIn  { from{opacity:0;transform:translateY(8px)}  to{opacity:1;transform:translateY(0)} }
@keyframes slideUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
@keyframes slideInR{ from{opacity:0;transform:translateX(16px)} to{opacity:1;transform:translateX(0)} }
@keyframes shimmer { from{background-position:200% 0} to{background-position:-200% 0} }
@keyframes spin    { to{transform:rotate(360deg)} }
@keyframes pulse   { 0%,100%{opacity:1} 50%{opacity:0.3} }
@keyframes blink   { 0%,100%{opacity:1} 50%{opacity:0} }

.app-container { display:flex; min-height:100vh; position:relative; z-index:1; }

.sidebar {
  width:var(--sidebar-w); background:var(--bg-surface);
  border-right:1px solid var(--border-soft);
  position:fixed; height:100vh; overflow-y:auto; overflow-x:hidden;
  display:flex; flex-direction:column; z-index:100;
  padding:1.5rem 1rem; scrollbar-width:none;
}
.sidebar::-webkit-scrollbar{display:none;}

.logo {
  display:flex; align-items:center; gap:0.65rem;
  padding:0.25rem 0.5rem; margin-bottom:2rem; flex-shrink:0;
}
.logo-icon {
  width:34px; height:34px; flex-shrink:0;
  display:flex; align-items:center; justify-content:center;
  filter:drop-shadow(0 0 10px rgba(255,101,53,0.5));
}
.logo-text {
  font-family:'Plus Jakarta Sans',sans-serif; font-size:1.05rem; font-weight:800;
  color:var(--text-primary); letter-spacing:-0.3px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.logo-text span {
  background: linear-gradient(135deg, var(--orange), var(--pink));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}

.nav-section-label {
  font-size:0.58rem; font-weight:700; text-transform:uppercase;
  letter-spacing:2px; color:var(--text-muted);
  padding:0 0.75rem; margin:1.5rem 0 0.5rem;
}
.nav-section-label:first-of-type{margin-top:0;}

.nav-item {
  display:flex; align-items:center; gap:0.7rem;
  padding:0.65rem 0.875rem; border-radius:var(--r-md);
  font-size:0.76rem; font-weight:600; color:var(--text-secondary);
  cursor:pointer; transition:all 0.18s var(--ease);
  margin-bottom:2px; border:none; background:transparent;
  width:100%; text-align:left; letter-spacing:0.2px; user-select:none;
}
.nav-item:hover { color:var(--text-primary); background:rgba(255,255,255,0.04); }
.nav-item.active { color:var(--orange); background:var(--orange-dim); border:1px solid var(--border-orange); }
.nav-icon { width:18px; height:18px; flex-shrink:0; display:flex; align-items:center; justify-content:center; opacity:0.55; transition:opacity 0.18s; }
.nav-item:hover .nav-icon { opacity:0.85; }
.nav-item.active .nav-icon { opacity:1; }

.sidebar-footer { margin-top:auto; padding-top:1rem; border-top:1px solid var(--border-soft); }
.sidebar-profile-btn {
  width:100%; background:var(--bg-elevated); border:1px solid var(--border);
  border-radius:var(--r-md); padding:0.7rem 0.875rem; cursor:pointer;
  display:flex; align-items:center; gap:0.7rem;
  transition:all 0.18s; text-align:left; margin-bottom:0.5rem;
}
.sidebar-profile-btn:hover { border-color:var(--border-bright); background:var(--bg-overlay); }
.sidebar-avatar {
  width:30px; height:30px;
  background:linear-gradient(135deg,var(--orange),var(--pink));
  border-radius:8px; display:flex; align-items:center; justify-content:center;
  font-family:'Plus Jakarta Sans',sans-serif; font-size:0.8rem; font-weight:800;
  color:#fff; flex-shrink:0;
}
.sidebar-user-info { flex:1; min-width:0; }
.sidebar-user-name  { font-size:0.73rem; font-weight:600; color:var(--text-primary); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.sidebar-user-label { font-size:0.62rem; color:var(--text-secondary); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin-top:1px; }
.sidebar-profile-icon { opacity:0.35; flex-shrink:0; }

.sync-status { display:flex; align-items:center; gap:0.4rem; font-size:0.62rem; color:var(--text-muted); margin-top:0.6rem; padding:0 0.25rem; }
.sync-dot { width:6px; height:6px; background:var(--green); border-radius:50%; flex-shrink:0; }
.sync-dot.syncing { background:var(--amber); animation:pulse 1s ease-in-out infinite; }

.main-content { margin-left:var(--sidebar-w); flex:1; padding:2rem 2.25rem; min-height:100vh; animation:fadeIn 0.3s ease; }

.page-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:1.75rem; gap:1rem; flex-wrap:wrap; }
.header { font-family:'Plus Jakarta Sans',sans-serif; font-size:1.6rem; font-weight:800; color:var(--text-primary); letter-spacing:-0.5px; }

.stats-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(175px,1fr)); gap:1rem; margin-bottom:1.75rem; }
.stat-card {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--r-lg); padding:1.25rem 1.4rem;
  transition:all 0.22s var(--ease); position:relative; overflow:hidden; cursor:default;
}
.stat-card::before {
  content:''; position:absolute; inset:0;
  background:linear-gradient(135deg,rgba(255,101,53,0.025) 0%,transparent 60%);
  pointer-events:none;
}
.stat-card:hover { border-color:var(--border-bright); transform:translateY(-2px); box-shadow:0 8px 32px rgba(0,0,0,0.4); }
.stat-label { font-size:0.63rem; font-weight:700; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-secondary); margin-bottom:0.65rem; }
.stat-value { font-family:'Plus Jakarta Sans',sans-serif; font-size:1.75rem; font-weight:800; color:var(--text-primary); letter-spacing:-1px; line-height:1; margin-bottom:0.35rem; }
.stat-value.positive { color:var(--green); }
.stat-value.negative { color:var(--red); }
.stat-change { font-size:0.65rem; color:var(--text-muted); }
.positive { color:var(--green); }
.negative { color:var(--red); }

.card { background:var(--bg-card); border:1px solid var(--border); border-radius:var(--r-lg); padding:1.4rem 1.6rem; margin-bottom:1.25rem; animation:fadeIn 0.25s ease; }
.card-title {
  font-family:'Plus Jakarta Sans',sans-serif; font-size:0.8rem; font-weight:800;
  text-transform:uppercase; letter-spacing:1px; color:var(--text-secondary);
  margin-bottom:1.25rem; display:flex; align-items:center; gap:0.5rem;
}
.card-title-count { background:var(--bg-elevated); border:1px solid var(--border); border-radius:20px; padding:0.1rem 0.5rem; font-size:0.62rem; color:var(--text-secondary); margin-left:auto; }

.btn {
  display:inline-flex; align-items:center; justify-content:center; gap:0.45rem;
  padding:0.65rem 1.25rem; border-radius:var(--r-md);
  font-family:'Plus Jakarta Sans',sans-serif; font-size:0.76rem; font-weight:700;
  cursor:pointer; transition:all 0.18s var(--ease);
  border:none; white-space:nowrap; user-select:none; letter-spacing:0.2px;
}
.btn:disabled { opacity:0.4; cursor:not-allowed; }
.btn:disabled:hover { transform:none !important; }
.btn-primary {
  background:linear-gradient(135deg, var(--orange), var(--pink));
  color:#fff; font-weight:700;
  box-shadow:0 2px 16px rgba(255,101,53,0.35);
}
.btn-primary:hover:not(:disabled) {
  background:linear-gradient(135deg, var(--orange-light), var(--pink));
  box-shadow:0 4px 24px rgba(255,101,53,0.5); transform:translateY(-1px);
}
.btn-secondary { background:var(--bg-elevated); color:var(--text-secondary); border:1px solid var(--border); }
.btn-secondary:hover:not(:disabled) { background:var(--bg-overlay); color:var(--text-primary); border-color:var(--border-bright); }
.btn-danger { background:var(--red-dim); color:var(--red); border:1px solid rgba(255,59,48,0.18); }
.btn-danger:hover:not(:disabled) { background:rgba(255,59,48,0.18); border-color:rgba(255,59,48,0.3); }
.btn-sm { padding:0.4rem 0.875rem; font-size:0.7rem; border-radius:var(--r-sm); }
.btn-block { width:100%; }
.btn-ai { background:linear-gradient(135deg,rgba(255,101,53,0.1),rgba(255,45,107,0.1)); color:var(--orange); border:1px solid rgba(255,101,53,0.22); font-weight:700; transition:all 0.2s; }
.btn-ai:hover:not(:disabled) { background:linear-gradient(135deg,rgba(255,101,53,0.18),rgba(255,45,107,0.18)); border-color:rgba(255,101,53,0.38); transform:translateY(-1px); box-shadow:0 4px 20px rgba(255,101,53,0.12); }
.btn-ai-locked { background:var(--bg-elevated); color:var(--text-secondary); border:1px dashed var(--border); cursor:pointer; transition:all 0.2s; }
.btn-ai-locked:hover { border-color:var(--amber); color:var(--amber); background:var(--amber-dim); }
.crown-icon { font-size:0.7rem; }

.form-group { margin-bottom:1rem; }
.form-label { display:block; font-size:0.65rem; font-weight:700; text-transform:uppercase; letter-spacing:1px; color:var(--text-secondary); margin-bottom:0.45rem; }
.form-label-row { display:flex; justify-content:space-between; align-items:center; margin-bottom:0.45rem; }
.form-label-row .form-label { margin-bottom:0; }
.form-input,.form-select,.form-textarea {
  width:100%; background:var(--bg-input); border:1px solid var(--border);
  border-radius:var(--r-md); padding:0.7rem 0.9rem;
  color:var(--text-primary); font-family:'JetBrains Mono',monospace;
  font-size:0.78rem; transition:all 0.18s; appearance:none;
}
.form-input::placeholder,.form-textarea::placeholder{color:var(--text-muted);}
.form-input:focus,.form-select:focus,.form-textarea:focus { outline:none; border-color:var(--orange); background:var(--bg-elevated); box-shadow:0 0 0 3px rgba(255,101,53,0.08); }
.form-textarea { resize:vertical; min-height:100px; line-height:1.6; }
.form-select { background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236E6E73' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:right 0.75rem center; padding-right:2rem; }
.form-row { display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:0.75rem; }

.trade-item {
  background:var(--bg-elevated); border:1px solid var(--border-soft);
  border-radius:var(--r-md); padding:1rem 1.1rem; cursor:pointer;
  transition:all 0.18s var(--ease); margin-bottom:0.5rem; animation:fadeIn 0.2s ease;
}
.trade-item:hover { border-color:var(--border-bright); background:var(--bg-overlay); transform:translateX(2px); }
.trade-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:0.55rem; gap:0.75rem; }
.trade-left,.trade-right { display:flex; align-items:center; gap:0.5rem; }
.trade-symbol { font-family:'Plus Jakarta Sans',sans-serif; font-size:0.92rem; font-weight:800; color:var(--text-primary); letter-spacing:0.5px; }
.trade-pnl { font-family:'Plus Jakarta Sans',sans-serif; font-size:0.92rem; font-weight:800; letter-spacing:-0.5px; }
.trade-pnl.positive{color:var(--green);} .trade-pnl.negative{color:var(--red);}
.trade-badges { display:flex; gap:0.35rem; flex-wrap:wrap; }
.trade-meta { display:flex; gap:0.75rem; flex-wrap:wrap; font-size:0.65rem; color:var(--text-secondary); }
.trade-meta-item { display:flex; align-items:center; gap:0.2rem; }
.trade-notes { font-size:0.7rem; color:var(--text-secondary); margin-top:0.5rem; padding-top:0.5rem; border-top:1px solid var(--border-soft); line-height:1.55; }

.badge { display:inline-flex; align-items:center; padding:0.18rem 0.55rem; border-radius:20px; font-size:0.6rem; font-weight:700; text-transform:uppercase; letter-spacing:0.5px; }
.badge-long    { background:rgba(48,209,88,0.1);   color:var(--green); }
.badge-short   { background:var(--red-dim);         color:var(--red); }
.badge-stock   { background:var(--orange-dim);      color:var(--orange); }
.badge-forex   { background:rgba(191,90,242,0.1);   color:var(--purple); }
.badge-crypto  { background:rgba(255,159,10,0.1);   color:var(--amber); }
.badge-futures { background:rgba(90,200,250,0.1);   color:var(--teal); }
.badge-options { background:rgba(10,132,255,0.1);   color:var(--blue); }
.badge-broker  { background:var(--bg-elevated); color:var(--text-secondary); border:1px solid var(--border); }

.skeleton { background:linear-gradient(90deg,var(--bg-elevated) 25%,rgba(255,255,255,0.04) 50%,var(--bg-elevated) 75%); background-size:200% 100%; animation:shimmer 1.8s infinite; border-radius:var(--r-md); }

#toast-container { position:fixed; bottom:1.5rem; right:1.5rem; z-index:9999; display:flex; flex-direction:column; gap:0.5rem; pointer-events:none; }
.toast { background:var(--bg-elevated); border:1px solid var(--border-bright); border-radius:var(--r-md); padding:0.75rem 1rem; font-size:0.76rem; color:var(--text-primary); display:flex; align-items:center; gap:0.6rem; animation:slideInR 0.25s ease; box-shadow:var(--shadow-card); pointer-events:all; max-width:320px; backdrop-filter:blur(12px); }
.toast.success{border-color:rgba(48,209,88,0.25);} .toast.error{border-color:rgba(255,59,48,0.25);} .toast.warn{border-color:rgba(255,159,10,0.25);}
.spinner { width:13px; height:13px; border:2px solid rgba(255,255,255,0.1); border-top-color:currentColor; border-radius:50%; animation:spin 0.65s linear infinite; display:inline-block; flex-shrink:0; }

.empty-state { text-align:center; padding:3rem 1rem; color:var(--text-secondary); }
.empty-state-icon { font-size:2.5rem; margin-bottom:0.75rem; opacity:0.35; }
.empty-state h3 { font-family:'Plus Jakarta Sans',sans-serif; font-size:1rem; font-weight:800; color:var(--text-primary); margin-bottom:0.35rem; }
.empty-state p  { font-size:0.75rem; line-height:1.6; }

.modal { position:fixed; inset:0; z-index:1000; background:rgba(4,4,4,0.82); backdrop-filter:blur(10px); display:flex; align-items:center; justify-content:center; padding:1.5rem; animation:fadeIn 0.18s ease; }
.modal-content { background:var(--bg-card); border:1px solid var(--border-bright); border-radius:var(--r-xl); padding:2rem; width:100%; max-width:620px; max-height:90vh; overflow-y:auto; box-shadow:var(--shadow-modal); animation:slideUp 0.22s ease; scrollbar-width:thin; scrollbar-color:var(--bg-overlay) transparent; }
.modal-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:1.5rem; gap:1rem; }
.modal-title { font-family:'Plus Jakarta Sans',sans-serif; font-size:1.1rem; font-weight:800; color:var(--text-primary); }
.modal-actions { display:flex; gap:0.75rem; margin-top:1.5rem; justify-content:flex-end; flex-wrap:wrap; }
.pnl-result { border:1px solid var(--border); border-radius:var(--r-md); padding:1.1rem 1.25rem; margin:1.25rem 0; text-align:center; background:var(--bg-elevated); }

.progress-bar { background:var(--bg-elevated); border-radius:4px; height:6px; overflow:hidden; border:1px solid var(--border-soft); }
.progress-fill { height:100%; background:linear-gradient(90deg,var(--orange),var(--pink)); border-radius:4px; transition:width 0.4s ease; }
.progress-text { font-size:0.68rem; color:var(--text-secondary); margin-top:0.4rem; text-align:center; }

.calendar-container { background:var(--bg-card); border:1px solid var(--border); border-radius:var(--r-lg); padding:1.4rem; margin-bottom:1.25rem; }
.calendar-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:1.25rem; }
.calendar-month-title { font-family:'Plus Jakarta Sans',sans-serif; font-size:1.1rem; font-weight:800; color:var(--text-primary); }
.calendar-nav-btn { width:32px; height:32px; background:var(--bg-elevated); border:1px solid var(--border); border-radius:var(--r-sm); color:var(--text-secondary); cursor:pointer; font-size:1.1rem; display:flex; align-items:center; justify-content:center; transition:all 0.18s; }
.calendar-nav-btn:hover{color:var(--orange);border-color:rgba(255,101,53,0.22);}
.calendar-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:3px; }
.calendar-day-header { font-size:0.58rem; font-weight:700; text-align:center; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; padding:0.4rem 0; }
.calendar-day { min-height:62px; border-radius:var(--r-sm); padding:0.4rem; background:var(--bg-elevated); border:1px solid var(--border-soft); cursor:pointer; transition:all 0.18s; position:relative; overflow:hidden; }
.calendar-day:hover{border-color:var(--border-bright);background:var(--bg-overlay);}
.calendar-day.empty{background:transparent;border-color:transparent;cursor:default;}
.calendar-day.profit{border-color:rgba(48,209,88,0.2);background:rgba(48,209,88,0.04);}
.calendar-day.profit:hover{background:rgba(48,209,88,0.09);}
.calendar-day.loss{border-color:rgba(255,59,48,0.2);background:rgba(255,59,48,0.04);}
.calendar-day.loss:hover{background:rgba(255,59,48,0.09);}
.calendar-day.breakeven{border-color:rgba(255,159,10,0.2);background:rgba(255,159,10,0.04);}
.calendar-day-number{font-weight:700;color:var(--text-secondary);font-size:0.66rem;}
.calendar-day.profit .calendar-day-number,.calendar-day.loss .calendar-day-number,.calendar-day.breakeven .calendar-day-number{color:var(--text-primary);}
.calendar-day-pnl{font-size:0.58rem;font-weight:700;margin-top:0.2rem;}
.calendar-day-pnl.positive{color:var(--green);} .calendar-day-pnl.negative{color:var(--red);}
.calendar-day-trades{font-size:0.54rem;color:var(--text-muted);margin-top:1px;}
.calendar-day-journal{position:absolute;top:3px;right:4px;font-size:0.55rem;}
.calendar-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:0.75rem;margin-bottom:1.25rem;}
.calendar-stat-item{background:var(--bg-elevated);border:1px solid var(--border-soft);border-radius:var(--r-md);padding:0.875rem 1rem;}
.calendar-stat-label{font-size:0.6rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;font-weight:700;margin-bottom:0.3rem;}
.calendar-stat-value{font-family:'Plus Jakarta Sans',sans-serif;font-size:1.1rem;font-weight:800;color:var(--text-primary);}

.journal-entry { background:var(--bg-elevated); border:1px solid var(--border-soft); border-left:3px solid var(--orange); border-radius:var(--r-md); padding:1rem 2.75rem 1rem 1.1rem; margin-bottom:0.65rem; position:relative; transition:all 0.18s; animation:fadeIn 0.2s ease; }
.journal-entry:hover{border-color:var(--border-bright);}
.journal-date{font-family:'Plus Jakarta Sans',sans-serif;font-size:0.73rem;font-weight:700;color:var(--orange);margin-bottom:0.4rem;}
.journal-date.positive{color:var(--green);} .journal-date.negative{color:var(--red);}
.journal-text{font-size:0.78rem;color:var(--text-secondary);line-height:1.65;white-space:pre-wrap;}
.journal-delete{position:absolute;top:0.875rem;right:0.875rem;background:none;border:none;color:var(--text-muted);cursor:pointer;font-size:0.73rem;padding:0.2rem 0.4rem;border-radius:4px;transition:all 0.18s;}
.journal-delete:hover{color:var(--red);background:var(--red-dim);}

.drop-zone { border:2px dashed var(--border-bright); border-radius:var(--r-lg); padding:2.5rem 1.5rem; text-align:center; cursor:pointer; transition:all 0.22s; background:var(--bg-elevated); color:var(--text-secondary); }
.drop-zone:hover,.drop-zone.dragover{border-color:var(--orange);background:var(--orange-dim);color:var(--text-primary);}
.drop-zone h3{font-family:'Plus Jakarta Sans',sans-serif;font-size:1rem;font-weight:800;margin-bottom:0.35rem;}
.drop-zone p{font-size:0.73rem;}
.csv-preview{margin-top:1.5rem;}
.csv-preview-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;flex-wrap:wrap;gap:0.75rem;font-size:0.76rem;}
.csv-table-wrap{overflow-x:auto;}
.csv-table{width:100%;border-collapse:separate;border-spacing:0;font-size:0.7rem;min-width:600px;}
.csv-table th{background:var(--bg-elevated);color:var(--text-secondary);font-size:0.6rem;text-transform:uppercase;letter-spacing:0.5px;padding:0.6rem 0.75rem;text-align:left;font-weight:700;border-bottom:1px solid var(--border);}
.csv-table td{padding:0.55rem 0.75rem;border-bottom:1px solid var(--border-soft);color:var(--text-secondary);}
.csv-table tr:last-child td{border-bottom:none;}
.row-valid{color:var(--green)!important;} .row-error{color:var(--red)!important;}
.csv-more{font-size:0.68rem;color:var(--text-muted);text-align:center;padding:0.5rem 0;}

.broker-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:0.875rem;margin-bottom:1.25rem;}
.broker-card{background:var(--bg-elevated);border:1px solid var(--border);border-radius:var(--r-md);padding:1.25rem;transition:all 0.22s;}
.broker-card:hover{border-color:var(--orange);background:var(--orange-dim);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,0.4);}
.broker-icon{font-size:1.75rem;margin-bottom:0.6rem;}
.broker-name{font-family:'Plus Jakarta Sans',sans-serif;font-size:0.85rem;font-weight:800;color:var(--text-primary);margin-bottom:0.3rem;}
.broker-desc{font-size:0.68rem;color:var(--text-secondary);line-height:1.5;}
.broker-soon{font-size:0.6rem;color:var(--amber);font-weight:700;margin-top:0.4rem;text-transform:uppercase;letter-spacing:0.5px;}
.broker-account{font-size:0.65rem;color:var(--text-muted);margin-left:0.5rem;}
.broker-sync-time{font-size:0.63rem;color:var(--text-muted);}
.broker-form-inner{margin-top:1.25rem;padding-top:1.25rem;border-top:1px solid var(--border);}
.broker-form-title{font-family:'Plus Jakarta Sans',sans-serif;font-size:0.88rem;font-weight:800;color:var(--text-primary);margin-bottom:1rem;}

.profile-header{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:var(--bg-elevated);border:1px solid var(--border-soft);border-radius:var(--r-md);margin-bottom:1.5rem;}
.profile-avatar{width:52px;height:52px;background:linear-gradient(135deg,var(--orange),var(--pink));border-radius:14px;display:flex;align-items:center;justify-content:center;font-family:'Plus Jakarta Sans',sans-serif;font-size:1.4rem;font-weight:800;color:#fff;flex-shrink:0;box-shadow:0 4px 16px rgba(255,101,53,0.35);}
.profile-name{font-family:'Plus Jakarta Sans',sans-serif;font-size:1rem;font-weight:800;color:var(--text-primary);}
.profile-email{font-size:0.7rem;color:var(--text-secondary);margin-top:2px;}
.profile-joined{font-size:0.63rem;color:var(--text-muted);margin-top:2px;}
.profile-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:0.75rem;margin-bottom:1.5rem;}
.profile-stat{background:var(--bg-elevated);border:1px solid var(--border-soft);border-radius:var(--r-md);padding:0.875rem;text-align:center;}
.profile-stat-value{font-family:'Plus Jakarta Sans',sans-serif;font-size:1.1rem;font-weight:800;color:var(--text-primary);}
.profile-stat-label{font-size:0.58rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;margin-top:0.2rem;}
.profile-section-title{font-size:0.6rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);margin-bottom:0.875rem;margin-top:1.5rem;padding-bottom:0.5rem;border-bottom:1px solid var(--border-soft);}
.profile-section-title.danger{color:var(--red);border-bottom-color:rgba(255,59,48,0.12);}
.danger-zone{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:1rem;background:var(--bg-elevated);border:1px solid var(--border-soft);border-radius:var(--r-md);flex-wrap:wrap;}

.ai-debrief-section{margin-top:1.25rem;padding-top:1.25rem;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:0.75rem;}
.ai-debrief-label{font-size:0.6rem;text-transform:uppercase;letter-spacing:1.5px;color:var(--orange);font-weight:700;}
.ai-debrief-card{background:linear-gradient(135deg,rgba(255,101,53,0.04),rgba(255,45,107,0.04));border:1px solid rgba(255,101,53,0.13);border-radius:var(--r-md);padding:1rem 1.1rem;min-height:2rem;}
.ai-debrief-text{font-size:0.82rem;color:var(--text-primary);line-height:1.75;white-space:pre-wrap;}
.ai-patterns-output{font-size:0.82rem;color:var(--text-primary);line-height:1.8;padding:0.25rem;}
.ai-cursor{display:inline-block;width:2px;height:1em;background:var(--orange);margin-left:2px;vertical-align:text-bottom;animation:blink 0.9s step-end infinite;border-radius:1px;}

.upgrade-modal-content{max-width:420px;text-align:center;}
.upgrade-modal-header{padding-bottom:1.25rem;border-bottom:1px solid var(--border);margin-bottom:1.25rem;}
.upgrade-crown{font-size:2.5rem;line-height:1;}
.upgrade-features{display:flex;flex-direction:column;gap:0.875rem;margin-bottom:1.5rem;text-align:left;}
.upgrade-feature{display:flex;gap:0.875rem;align-items:flex-start;background:var(--bg-elevated);border:1px solid var(--border);border-radius:var(--r-md);padding:0.875rem 1rem;}
.upgrade-feature-icon{font-size:1.25rem;flex-shrink:0;margin-top:0.1rem;}
.upgrade-feature-title{font-weight:700;font-size:0.82rem;margin-bottom:0.2rem;}
.upgrade-feature-desc{font-size:0.7rem;color:var(--text-secondary);line-height:1.5;}
.upgrade-price{margin-bottom:0.5rem;}
.upgrade-price-amount{font-family:'Plus Jakarta Sans',sans-serif;font-size:2rem;font-weight:800;background:linear-gradient(135deg,var(--orange),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.upgrade-price-period{font-size:0.875rem;color:var(--text-secondary);margin-left:0.25rem;}

.confirm-overlay{position:fixed;inset:0;z-index:2000;background:rgba(4,4,4,0.85);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;padding:1rem;animation:fadeIn 0.18s ease;}
.confirm-box{background:var(--bg-card);border:1px solid var(--border-bright);border-radius:var(--r-lg);padding:1.75rem;width:100%;max-width:380px;box-shadow:var(--shadow-modal);animation:slideUp 0.2s ease;}
.confirm-msg{font-size:0.86rem;line-height:1.65;color:var(--text-primary);margin-bottom:1.25rem;}
.confirm-input{margin-bottom:1.1rem;}
.confirm-actions{display:flex;gap:0.75rem;justify-content:flex-end;}

.mobile-more-sheet{display:none;position:fixed;inset:0;z-index:300;}
.mobile-more-backdrop{position:absolute;inset:0;background:rgba(4,4,4,0.75);backdrop-filter:blur(6px);}
.mobile-more-content{position:absolute;bottom:64px;left:0;right:0;background:var(--bg-surface);border-top:1px solid var(--border);border-radius:var(--r-xl) var(--r-xl) 0 0;padding:1rem 1.25rem 1.5rem;animation:slideUp 0.22s ease;}
.mobile-more-handle{width:36px;height:4px;background:var(--border-bright);border-radius:2px;margin:0 auto 1rem;}
.mobile-more-title{font-family:'Plus Jakarta Sans',sans-serif;font-size:0.82rem;font-weight:800;margin-bottom:1rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px;}
.mobile-more-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:0.5rem;}
.mobile-more-item{display:flex;flex-direction:column;align-items:center;gap:0.4rem;padding:1rem 0.5rem;background:var(--bg-elevated);border:1px solid var(--border);border-radius:var(--r-md);color:var(--text-secondary);font-family:'Plus Jakarta Sans',sans-serif;font-size:0.6rem;font-weight:600;cursor:pointer;transition:all 0.18s;}
.mobile-more-item:hover,.mobile-more-item.active{background:var(--orange-dim);border-color:var(--border-orange);color:var(--orange);}
.mobile-more-icon{display:flex;align-items:center;justify-content:center;}

.filter-bar{display:flex;gap:0.75rem;margin-bottom:1.1rem;flex-wrap:wrap;align-items:center;}
.filter-count{color:var(--text-secondary);font-size:0.7rem;margin-left:auto;white-space:nowrap;}
.filter-chips{display:flex;gap:0.4rem;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;padding-bottom:2px;}
.filter-chips::-webkit-scrollbar{display:none;}
.filter-chip{padding:0.38rem 0.875rem;background:var(--bg-elevated);border:1px solid var(--border);border-radius:20px;color:var(--text-secondary);font-family:'Plus Jakarta Sans',sans-serif;font-size:0.68rem;font-weight:600;cursor:pointer;white-space:nowrap;transition:all 0.18s;flex-shrink:0;}
.filter-chip:hover{border-color:var(--border-bright);color:var(--text-primary);}
.filter-chip.active{background:var(--orange-dim);border-color:var(--border-orange);color:var(--orange);}

.mobile-topbar{display:none;} .bottom-nav{display:none;} .mobile-avatar{display:none;} .hide-mobile{}

.auth-page{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:1.5rem;background:
  radial-gradient(ellipse 60% 40% at 20% -5%,rgba(255,101,53,0.07) 0%,transparent 55%),
  radial-gradient(ellipse 45% 35% at 85% 105%,rgba(255,45,107,0.05) 0%,transparent 55%),
  var(--bg-base);}
.auth-box{background:var(--bg-card);border:1px solid var(--border-bright);border-radius:var(--r-2xl);padding:2.5rem;width:100%;max-width:420px;box-shadow:var(--shadow-modal),0 0 60px rgba(255,101,53,0.04);}
.auth-header{margin-bottom:2rem;}
.auth-logo{font-family:'Plus Jakarta Sans',sans-serif;font-size:2rem;font-weight:800;text-align:center;margin-bottom:0.4rem;display:flex;align-items:center;justify-content:center;gap:0.6rem;}
.auth-logo-icon{width:44px;height:44px;display:flex;align-items:center;justify-content:center;flex-shrink:0;filter:drop-shadow(0 0 12px rgba(255,101,53,0.5));}
.auth-logo-text{color:var(--text-primary);}
.auth-logo-text span{background:linear-gradient(135deg,var(--orange),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.auth-tagline{text-align:center;color:var(--text-secondary);font-size:0.7rem;letter-spacing:0.5px;}
.auth-tabs{display:flex;background:var(--bg-elevated);border:1px solid var(--border);border-radius:var(--r-md);padding:4px;margin-bottom:1.75rem;}
.auth-tab{flex:1;padding:0.6rem;text-align:center;cursor:pointer;border-radius:var(--r-sm);font-size:0.73rem;font-weight:700;transition:all 0.18s;color:var(--text-secondary);border:none;background:transparent;font-family:'Plus Jakarta Sans',sans-serif;letter-spacing:0.3px;}
.auth-tab:hover:not(.active){color:var(--text-primary);}
.auth-tab.active{background:linear-gradient(135deg,var(--orange),var(--pink));color:#fff;}
.auth-form{display:none;animation:fadeIn 0.22s ease;}
.auth-form.active{display:block;}
.auth-alert{padding:0.8rem 1rem;border-radius:var(--r-md);font-size:0.76rem;margin-bottom:1.1rem;display:none;line-height:1.6;}
.auth-alert.error{background:var(--red-dim);border:1px solid rgba(255,59,48,0.18);color:var(--red);}
.auth-alert.success{background:var(--orange-dim);border:1px solid rgba(255,101,53,0.18);color:var(--orange);word-break:break-word;overflow-wrap:anywhere;}
.auth-alert.show{display:block;}
.auth-divider{display:flex;align-items:center;margin:1.25rem 0;color:var(--text-secondary);font-size:0.68rem;}
.auth-divider::before,.auth-divider::after{content:'';flex:1;height:1px;background:var(--border);}
.auth-divider span{padding:0 0.875rem;}
.auth-link{background:none;border:none;color:var(--text-secondary);font-family:'Plus Jakarta Sans',sans-serif;font-size:0.7rem;cursor:pointer;padding:0;transition:color 0.18s;}
.auth-link:hover{color:var(--orange);}
.auth-hint{color:var(--text-secondary);font-size:0.76rem;margin-bottom:1.1rem;line-height:1.6;}
.auth-back{margin-bottom:1rem;}
.google-btn{width:100%;padding:0.85rem;background:var(--bg-elevated);border:1px solid var(--border);border-radius:var(--r-md);color:var(--text-primary);font-family:'Plus Jakarta Sans',sans-serif;font-size:0.78rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.75rem;transition:all 0.18s;}
.google-btn:hover{background:var(--bg-overlay);border-color:var(--border-bright);transform:translateY(-1px);}
.google-icon{width:20px;height:20px;flex-shrink:0;}
.password-strength{display:none;align-items:center;gap:0.65rem;margin-top:0.55rem;}
.pw-bar{flex:1;height:4px;background:rgba(255,255,255,0.05);border-radius:20px;overflow:hidden;}
.pw-fill{height:100%;border-radius:20px;transition:width 0.3s ease,background 0.3s ease;width:0%;}
.pw-label{font-size:0.63rem;font-weight:700;white-space:nowrap;min-width:50px;text-align:right;}
.auth-token-box{background:var(--bg-base);border:1px solid var(--border);border-radius:var(--r-sm);padding:0.75rem;font-size:0.7rem;word-break:break-all;color:var(--orange);cursor:pointer;font-family:monospace;margin:0.5rem 0;transition:border-color 0.2s;}
.auth-token-box:hover{border-color:var(--orange);}
.google-note{font-size:0.7rem;color:var(--text-secondary);text-align:center;margin-top:0.6rem;line-height:1.5;}
.wake-banner{background:var(--amber-dim);border:1px solid rgba(255,159,10,0.18);color:var(--amber);padding:0.6rem 1rem;border-radius:var(--r-md);font-size:0.68rem;margin-bottom:1.1rem;text-align:center;line-height:1.5;}
#google-btn-container{display:flex;justify-content:center;min-height:44px;align-items:center;}

@media(max-width:768px){
  .sidebar{display:none;} .mobile-more-sheet{display:block;}
  .mobile-topbar{display:flex;align-items:center;justify-content:space-between;padding:0.875rem 1rem;background:var(--bg-surface);border-bottom:1px solid var(--border-soft);position:sticky;top:0;z-index:50;margin:-1rem -1rem 1rem;}
  .mobile-avatar{display:flex;width:34px;height:34px;background:linear-gradient(135deg,var(--orange),var(--pink));border-radius:10px;align-items:center;justify-content:center;font-family:'Plus Jakarta Sans',sans-serif;font-size:0.9rem;font-weight:800;color:#fff;border:none;cursor:pointer;flex-shrink:0;}
  .bottom-nav{display:flex;align-items:center;justify-content:space-around;position:fixed;bottom:0;left:0;right:0;height:64px;background:var(--bg-surface);border-top:1px solid var(--border-soft);z-index:200;padding:0 0.5rem;padding-bottom:env(safe-area-inset-bottom);}
  .bottom-nav-item{display:flex;flex-direction:column;align-items:center;gap:0.2rem;padding:0.5rem 0.75rem;background:none;border:none;color:var(--text-secondary);cursor:pointer;transition:all 0.18s;border-radius:var(--r-sm);flex:1;}
  .bottom-nav-item span{font-family:'Plus Jakarta Sans',sans-serif;font-size:0.53rem;font-weight:600;}
  .bottom-nav-item.active{color:var(--orange);}
  .bottom-nav-item.active svg{stroke:var(--orange);}
  .bottom-nav-fab{width:52px;height:52px;background:linear-gradient(135deg,var(--orange),var(--pink));border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;box-shadow:0 4px 20px rgba(255,101,53,0.5);transition:all 0.18s;flex-shrink:0;margin-bottom:8px;}
  .bottom-nav-fab:active{transform:scale(0.94);}
  .main-content{margin-left:0;padding:1rem;padding-bottom:80px;min-height:100vh;}
  .hide-mobile{display:none!important;}
  .header{font-size:1.25rem;} .page-header{margin-bottom:1rem;}
  .stats-grid{grid-template-columns:repeat(2,1fr);gap:0.65rem;margin-bottom:1rem;}
  .stat-card{padding:1rem;} .stat-value{font-size:1.4rem;} .stat-label{font-size:0.6rem;}
  .card{padding:1rem;border-radius:var(--r-md);} .card-title{font-size:0.73rem;}
  .form-row{grid-template-columns:1fr;gap:0;}
  .form-input,.form-select,.form-textarea{font-size:16px;}
  .modal{align-items:flex-end;padding:0;}
  .modal-content{max-width:100%;width:100%;max-height:92vh;border-radius:var(--r-xl) var(--r-xl) 0 0;padding:1.25rem;animation:slideUp 0.25s ease;}
  .modal-content::before{content:'';display:block;width:36px;height:4px;background:var(--border-bright);border-radius:2px;margin:0 auto 1.25rem;}
  .profile-stats{grid-template-columns:repeat(2,1fr);}
  .calendar-stats{grid-template-columns:repeat(2,1fr);}
  .calendar-day{min-height:40px;padding:0.25rem;}
  .calendar-day-pnl,.calendar-day-trades{display:none;}
  .broker-grid{grid-template-columns:1fr;}
  .auth-box{padding:1.75rem 1.25rem;border-radius:var(--r-lg);}
}
@media(max-width:380px){
  .stats-grid{grid-template-columns:repeat(2,1fr);gap:0.5rem;}
  .stat-value{font-size:1.2rem;}
  .bottom-nav-item{padding:0.5rem 0.4rem;}
}

/* ═══════════════════════════════════════════════════════════
   LIGHT THEME  —  data-theme="light"
   Warm cream base · Burnt orange accents · Clear contrast
   ═══════════════════════════════════════════════════════════ */

[data-theme="light"] {
  --bg-base:      #FFFCFB;
  --bg-surface:   #F7F2EF;
  --bg-card:      #FFFFFF;
  --bg-elevated:  #FDF8F6;
  --bg-overlay:   #F0EBE7;
  --bg-input:     #FAF6F4;
  --orange:       #E8501E;
  --orange-dim:   rgba(232,80,30,0.08);
  --orange-glow:  rgba(232,80,30,0.25);
  --orange-light: #F06837;
  --pink:         #D9245A;
  --pink-dim:     rgba(217,36,90,0.08);
  --green:        #1A9E4A;
  --green-dim:    rgba(26,158,74,0.10);
  --red:          #D92D20;
  --red-dim:      rgba(217,45,32,0.08);
  --amber:        #C47B0A;
  --amber-dim:    rgba(196,123,10,0.09);
  --purple:       #7B3DB5;
  --blue:         #1558D6;
  --teal:         #0A7FA8;
  --text-primary:   #1A1714;
  --text-secondary: #6B6068;
  --text-muted:     #B0A8A4;
  --border:         rgba(0,0,0,0.08);
  --border-soft:    rgba(0,0,0,0.05);
  --border-bright:  rgba(0,0,0,0.14);
  --border-orange:  rgba(232,80,30,0.2);
  --shadow-card:  0 1px 4px rgba(0,0,0,0.06), 0 4px 16px rgba(0,0,0,0.04);
  --shadow-modal: 0 16px 64px rgba(0,0,0,0.14);
}

/* Body background override */
[data-theme="light"] body,
[data-theme="light"] {
  background: var(--bg-base);
  color: var(--text-primary);
}

[data-theme="light"] body::before {
  background:
    radial-gradient(ellipse 70% 40% at 15% 0%, rgba(232,80,30,0.04) 0%, transparent 60%),
    radial-gradient(ellipse 50% 35% at 85% 100%, rgba(217,36,90,0.025) 0%, transparent 60%);
}

/* ── SIDEBAR light ── */
[data-theme="light"] .sidebar {
  background: #F2EDE9;
  border-right-color: rgba(0,0,0,0.09);
}

[data-theme="light"] .nav-section-label {
  color: #B5ADA9;
}

[data-theme="light"] .nav-item {
  color: #7A716E;
}
[data-theme="light"] .nav-item:hover {
  color: var(--text-primary);
  background: rgba(0,0,0,0.05);
}
[data-theme="light"] .nav-item.active {
  color: var(--orange);
  background: var(--orange-dim);
  border-color: var(--border-orange);
}

[data-theme="light"] .sidebar-profile-btn {
  background: rgba(255,255,255,0.7);
  border-color: rgba(0,0,0,0.09);
}
[data-theme="light"] .sidebar-profile-btn:hover {
  background: #fff;
  border-color: rgba(0,0,0,0.14);
}

[data-theme="light"] .sidebar-footer {
  border-top-color: rgba(0,0,0,0.09);
}

/* ── STAT CARDS light ── */
[data-theme="light"] .stat-card {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.08);
  box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 4px 12px rgba(0,0,0,0.03);
}
[data-theme="light"] .stat-card::before {
  background: linear-gradient(135deg, rgba(232,80,30,0.03) 0%, transparent 60%);
}
[data-theme="light"] .stat-card:hover {
  border-color: rgba(0,0,0,0.13);
  box-shadow: 0 2px 8px rgba(0,0,0,0.08), 0 8px 24px rgba(0,0,0,0.05);
}
[data-theme="light"] .stat-label {
  color: #9E9490;
}
[data-theme="light"] .stat-value {
  color: var(--text-primary);
}
[data-theme="light"] .stat-change {
  color: #B5ADA9;
}

/* ── CARDS light ── */
[data-theme="light"] .card {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.08);
  box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.03);
}
[data-theme="light"] .card-title {
  color: #9E9490;
}
[data-theme="light"] .card-title-count {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.08);
  color: #9E9490;
}

/* ── TRADE ITEMS light ── */
[data-theme="light"] .trade-item {
  background: #FAF6F4;
  border-color: rgba(0,0,0,0.07);
}
[data-theme="light"] .trade-item:hover {
  background: #F5F0ED;
  border-color: rgba(0,0,0,0.12);
}

/* ── FORMS light ── */
[data-theme="light"] .form-input,
[data-theme="light"] .form-select,
[data-theme="light"] .form-textarea {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.12);
  color: var(--text-primary);
}
[data-theme="light"] .form-input::placeholder,
[data-theme="light"] .form-textarea::placeholder {
  color: #C4BAB6;
}
[data-theme="light"] .form-input:focus,
[data-theme="light"] .form-select:focus,
[data-theme="light"] .form-textarea:focus {
  border-color: var(--orange);
  background: #FFFFFF;
  box-shadow: 0 0 0 3px rgba(232,80,30,0.07);
}

/* ── MODAL light ── */
[data-theme="light"] .modal {
  background: rgba(26,23,20,0.45);
}
[data-theme="light"] .modal-content {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.10);
  box-shadow: var(--shadow-modal);
}

/* ── TOAST light ── */
[data-theme="light"] .toast {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.12);
  color: var(--text-primary);
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
}

/* ── CALENDAR light ── */
[data-theme="light"] .calendar-container {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.08);
}
[data-theme="light"] .calendar-nav-btn {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.09);
  color: var(--text-secondary);
}
[data-theme="light"] .calendar-nav-btn:hover {
  color: var(--orange);
  border-color: rgba(232,80,30,0.22);
}
[data-theme="light"] .calendar-day {
  background: #FAF6F4;
  border-color: rgba(0,0,0,0.06);
}
[data-theme="light"] .calendar-day:hover {
  background: #F5F0ED;
  border-color: rgba(0,0,0,0.12);
}
[data-theme="light"] .calendar-stat-item {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.06);
}
[data-theme="light"] .calendar-day.profit { border-color: rgba(26,158,74,0.22); background: rgba(26,158,74,0.05); }
[data-theme="light"] .calendar-day.loss   { border-color: rgba(217,45,32,0.18); background: rgba(217,45,32,0.04); }
[data-theme="light"] .calendar-day.breakeven { border-color: rgba(196,123,10,0.2); background: rgba(196,123,10,0.04); }

/* ── JOURNAL light ── */
[data-theme="light"] .journal-entry {
  background: #FAF6F4;
  border-color: rgba(0,0,0,0.07);
  border-left-color: var(--orange);
}

/* ── DROP ZONE light ── */
[data-theme="light"] .drop-zone {
  background: #FAF6F4;
  border-color: rgba(0,0,0,0.14);
  color: var(--text-secondary);
}
[data-theme="light"] .drop-zone:hover,
[data-theme="light"] .drop-zone.dragover {
  border-color: var(--orange);
  background: var(--orange-dim);
  color: var(--text-primary);
}

/* ── BROKERS light ── */
[data-theme="light"] .broker-card {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.08);
}
[data-theme="light"] .broker-card:hover {
  border-color: var(--orange);
  background: var(--orange-dim);
}

/* ── PROFILE light ── */
[data-theme="light"] .profile-header {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.07);
}
[data-theme="light"] .profile-stat {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.06);
}

/* ── CONFIRM DIALOG light ── */
[data-theme="light"] .confirm-overlay {
  background: rgba(26,23,20,0.45);
}
[data-theme="light"] .confirm-box {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.10);
}

/* ── MOBILE light ── */
[data-theme="light"] .mobile-topbar {
  background: #F2EDE9;
  border-bottom-color: rgba(0,0,0,0.09);
}
[data-theme="light"] .bottom-nav {
  background: #F2EDE9;
  border-top-color: rgba(0,0,0,0.09);
}
[data-theme="light"] .mobile-more-content {
  background: #F2EDE9;
  border-top-color: rgba(0,0,0,0.09);
}
[data-theme="light"] .mobile-more-item {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.08);
  color: var(--text-secondary);
}
[data-theme="light"] .mobile-more-item:hover,
[data-theme="light"] .mobile-more-item.active {
  background: var(--orange-dim);
  border-color: var(--border-orange);
  color: var(--orange);
}

/* ── FILTER CHIPS light ── */
[data-theme="light"] .filter-chip {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.10);
  color: var(--text-secondary);
}
[data-theme="light"] .filter-chip:hover {
  border-color: rgba(0,0,0,0.18);
  color: var(--text-primary);
}
[data-theme="light"] .filter-chip.active {
  background: var(--orange-dim);
  border-color: var(--border-orange);
  color: var(--orange);
}

/* ── AI DEBRIEF light ── */
[data-theme="light"] .ai-debrief-card {
  background: linear-gradient(135deg, rgba(232,80,30,0.04), rgba(217,36,90,0.03));
  border-color: rgba(232,80,30,0.14);
}

/* ── UPGRADE MODAL light ── */
[data-theme="light"] .upgrade-feature {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.08);
}

/* ── SKELETON light ── */
[data-theme="light"] .skeleton {
  background: linear-gradient(90deg, #F0EBE7 25%, rgba(0,0,0,0.03) 50%, #F0EBE7 75%);
}

/* ── CSV TABLE light ── */
[data-theme="light"] .csv-table th {
  background: var(--bg-elevated);
  border-bottom-color: rgba(0,0,0,0.09);
}
[data-theme="light"] .csv-table td {
  border-bottom-color: rgba(0,0,0,0.05);
}

/* ── EMPTY STATE light ── */
[data-theme="light"] .empty-state {
  color: var(--text-secondary);
}

/* ── SYNC DOT light ── */
[data-theme="light"] .sync-status {
  color: #B5ADA9;
}

/* ── THEME TOGGLE BUTTON ── */
.btn-theme-toggle {
  display: inline-flex; align-items: center; justify-content: center; gap: 0.45rem;
  width: 100%; background: var(--bg-elevated); color: var(--text-secondary);
  border: 1px solid var(--border); border-radius: var(--r-md);
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.73rem; font-weight: 600;
  padding: 0.5rem 1rem; cursor: pointer; transition: all 0.18s;
}
.btn-theme-toggle:hover {
  color: var(--orange);
  border-color: var(--border-orange);
  background: var(--orange-dim);
}
[data-theme="light"] .btn-theme-toggle {
  background: #FFFFFF;
  border-color: rgba(0,0,0,0.10);
  color: #7A716E;
}
[data-theme="light"] .btn-theme-toggle:hover {
  color: var(--orange);
  border-color: var(--border-orange);
  background: var(--orange-dim);
}

/* ── MOBILE THEME ICON BUTTON ── */
.btn-icon-theme {
  width: 32px; height: 32px; background: var(--bg-elevated);
  border: 1px solid var(--border); border-radius: var(--r-sm);
  color: var(--text-secondary); display: flex; align-items: center;
  justify-content: center; cursor: pointer; transition: all 0.18s;
}
.btn-icon-theme:hover {
  color: var(--orange);
  border-color: var(--border-orange);
  background: var(--orange-dim);
}
[data-theme="light"] .btn-icon-theme {
  background: rgba(255,255,255,0.8);
  border-color: rgba(0,0,0,0.10);
}

/* ── LIGHT: main-content scrollbar ── */
[data-theme="light"] ::-webkit-scrollbar { width: 6px; }
[data-theme="light"] ::-webkit-scrollbar-track { background: transparent; }
[data-theme="light"] ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.12); border-radius: 3px; }
[data-theme="light"] ::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.22); }

/* ── LIGHT: page header section titles ── */
[data-theme="light"] .header {
  color: var(--text-primary);
}

/* ── LIGHT: progress bar ── */
[data-theme="light"] .progress-bar {
  background: #EDE8E5;
  border-color: rgba(0,0,0,0.07);
}

/* ── LIGHT: modal-title ── */
[data-theme="light"] .modal-title {
  color: var(--text-primary);
}

/* ── LIGHT: pnl result ── */
[data-theme="light"] .pnl-result {
  background: var(--bg-elevated);
  border-color: rgba(0,0,0,0.09);
}

/* ── LIGHT: badge variants ── */
[data-theme="light"] .badge-stock   { background: rgba(232,80,30,0.09);  }
[data-theme="light"] .badge-forex   { background: rgba(123,61,181,0.09); }
[data-theme="light"] .badge-crypto  { background: rgba(196,123,10,0.09); }
[data-theme="light"] .badge-futures { background: rgba(10,127,168,0.09); }
[data-theme="light"] .badge-options { background: rgba(21,88,214,0.09);  }

/* ── LIGHT: sidebar user name/label ── */
[data-theme="light"] .sidebar-user-name { color: var(--text-primary); }
[data-theme="light"] .sidebar-user-label { color: var(--text-secondary); }

/* ═══════════════════════════════════════════════════════════
   ONBOARDING MODAL
   ═══════════════════════════════════════════════════════════ */
.onboarding-backdrop { background: rgba(0,0,0,0.72); backdrop-filter: blur(8px); }
.onboarding-modal {
  max-width: 480px; width: 94vw; text-align: center;
  padding: 2.5rem 2rem 2rem; position: relative;
  border: 1px solid var(--border-orange);
}
.onboarding-close {
  position: absolute; top: 1rem; right: 1rem;
  background: none; border: none; color: var(--text-muted);
  font-size: 1rem; cursor: pointer; padding: 0.25rem 0.5rem;
  border-radius: var(--r-sm); transition: color 0.15s;
}
.onboarding-close:hover { color: var(--text-primary); }
.onboarding-dots {
  display: flex; gap: 0.45rem; justify-content: center; margin-bottom: 1.75rem;
}
.onboarding-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--bg-overlay); transition: all 0.25s;
}
.onboarding-dot.active { background: var(--orange); width: 24px; border-radius: 4px; }
.onboarding-dot.done   { background: var(--orange); opacity: 0.38; }
.onboarding-icon { margin-bottom: 1.25rem; display: flex; justify-content: center; }
.onboarding-heading {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 1.35rem; font-weight: 800;
  color: var(--text-primary); margin: 0 0 0.75rem;
}
.onboarding-sub {
  font-size: 0.83rem; color: var(--text-secondary); line-height: 1.65;
  margin-bottom: 1.75rem;
}
.onboarding-actions { display: flex; flex-direction: column; gap: 0; }

/* Onboarding option cards (step 2) */
.onboarding-options { display: flex; flex-direction: column; gap: 0.65rem; text-align: left; }
.onboarding-option {
  display: flex; align-items: center; gap: 0.85rem;
  background: var(--bg-surface); border: 1px solid var(--border);
  border-radius: var(--r-md); padding: 0.85rem 1rem;
  cursor: pointer; transition: all 0.18s;
}
.onboarding-option:hover {
  border-color: var(--border-orange); background: var(--orange-dim);
  transform: translateX(2px);
}
.oo-icon { font-size: 1.3rem; flex-shrink: 0; }
.oo-title { font-weight: 700; font-size: 0.85rem; color: var(--text-primary); }
.oo-desc  { font-size: 0.73rem; color: var(--text-secondary); margin-top: 0.1rem; }
.oo-arrow { margin-left: auto; color: var(--text-muted); font-size: 1rem; flex-shrink: 0; }

/* ═══════════════════════════════════════════════════════════
   GOALS VIEW
   ═══════════════════════════════════════════════════════════ */
.goals-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
}
@media (max-width: 768px) { .goals-grid { grid-template-columns: 1fr; } }

.goal-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--r-lg); padding: 1.35rem 1.25rem;
  position: relative; transition: all 0.22s;
}
.goal-card:hover {
  border-color: var(--border-orange);
  box-shadow: 0 4px 20px rgba(255,101,53,0.08);
}
.goal-card.goal-reached {
  border-color: rgba(48,209,88,0.35);
  background: linear-gradient(135deg, rgba(48,209,88,0.04), var(--bg-card));
}
.goal-badge {
  position: absolute; top: -10px; right: 1rem;
  background: var(--green); color: #fff;
  font-size: 0.68rem; font-weight: 700; letter-spacing: 0.04em;
  padding: 0.18rem 0.6rem; border-radius: 50px;
}
.goal-period {
  font-size: 0.67rem; font-weight: 700; letter-spacing: 0.08em;
  color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.75rem;
}
.goal-current {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 2rem; font-weight: 800; line-height: 1.1; margin-bottom: 0.35rem;
}
.goal-target   { font-size: 0.73rem; color: var(--text-secondary); }
.goal-pct      { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.4rem; text-align: right; }
.goal-no-target {
  font-size: 0.73rem; color: var(--text-muted);
  margin-top: 0.5rem; font-style: italic;
}

/* Progress bar (shared) */
.progress-bar {
  height: 6px; background: var(--bg-overlay);
  border-radius: 3px; overflow: hidden;
}
.progress-fill {
  height: 100%; border-radius: 3px;
  background: linear-gradient(90deg, var(--orange), var(--pink));
  transition: width 0.5s ease;
}

/* All-time stats grid */
.goals-alltime {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;
}
@media (max-width: 600px) { .goals-alltime { grid-template-columns: repeat(2,1fr); } }
.alltime-stat {
  background: var(--bg-surface); border: 1px solid var(--border);
  border-radius: var(--r-md); padding: 0.85rem 1rem; text-align: center;
}
.alltime-val {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 1.2rem; font-weight: 800; color: var(--text-primary);
}
.alltime-lbl {
  font-size: 0.67rem; font-weight: 600; letter-spacing: 0.06em;
  color: var(--text-muted); text-transform: uppercase; margin-top: 0.2rem;
}

/* ═══════════════════════════════════════════════════════════
   RISK CALCULATOR VIEW
   ═══════════════════════════════════════════════════════════ */
.riskcalc-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.25rem;
  align-items: start;
}
@media (max-width: 860px) { .riskcalc-layout { grid-template-columns: 1fr; } }

.riskcalc-inputs { /* no extra styles needed beyond .card */ }

.riskcalc-results {
  display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;
}
@media (max-width: 860px) {
  .riskcalc-results { grid-template-columns: repeat(2, 1fr); }
}

.rc-result-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--r-md); padding: 1rem; text-align: center;
  transition: all 0.18s;
}
.rc-result-card.rc-primary {
  border-color: var(--border-orange);
  background: linear-gradient(135deg, var(--orange-dim), var(--bg-card));
  grid-column: span 2;
}
.rc-result-card.rc-good { border-color: rgba(48,209,88,0.3); background: rgba(48,209,88,0.04); }
.rc-result-card.rc-bad  { border-color: rgba(255,59,48,0.3);  background: rgba(255,59,48,0.04);  }

.rc-result-label { font-size: 0.65rem; font-weight: 700; letter-spacing: 0.08em; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.45rem; }
.rc-result-value { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--text-primary); }
.rc-result-sub   { font-size: 0.68rem; color: var(--text-secondary); margin-top: 0.25rem; }

.rc-empty {
  grid-column: span 2;
  background: var(--bg-card); border: 1px dashed var(--border);
  border-radius: var(--r-lg); padding: 3rem 2rem; text-align: center;
  color: var(--text-secondary);
}

/* Range slider */
.form-range {
  -webkit-appearance: none; appearance: none; width: 100%; height: 5px;
  background: var(--bg-overlay); border-radius: 3px; outline: none; cursor: pointer;
  border: none; padding: 0;
}
.form-range::-webkit-slider-thumb {
  -webkit-appearance: none; width: 18px; height: 18px;
  background: var(--orange); border-radius: 50%;
  box-shadow: 0 0 0 3px rgba(255,101,53,0.18);
  cursor: pointer; transition: box-shadow 0.15s;
}
.form-range::-webkit-slider-thumb:hover {
  box-shadow: 0 0 0 5px rgba(255,101,53,0.25);
}
.form-range::-moz-range-thumb {
  width: 18px; height: 18px; background: var(--orange);
  border-radius: 50%; border: none; cursor: pointer;
}
.rc-pct-badge {
  background: var(--orange-dim); color: var(--orange);
  font-size: 0.68rem; font-weight: 700; padding: 0.15rem 0.5rem;
  border-radius: 50px; border: 1px solid var(--border-orange);
}
.rc-range-labels {
  display: flex; justify-content: space-between;
  font-size: 0.62rem; color: var(--text-muted); margin-top: 0.3rem;
}

/* Risk rules */
.risk-rules { display: flex; flex-direction: column; gap: 0.65rem; }
.risk-rule {
  display: flex; gap: 0.75rem; align-items: flex-start;
  font-size: 0.82rem; color: var(--text-secondary); line-height: 1.5;
}
.risk-rule-icon { font-size: 1rem; flex-shrink: 0; margin-top: 0.05rem; }

/* ═══════════════════════════════════════════════════════════
   LEADERBOARD VIEW
   ═══════════════════════════════════════════════════════════ */
.lb-beta-tag {
  font-size: 0.63rem; font-weight: 700; letter-spacing: 0.07em;
  background: var(--orange-dim); color: var(--orange);
  border: 1px solid var(--border-orange); border-radius: 50px;
  padding: 0.18rem 0.65rem; text-transform: uppercase;
  align-self: center;
}

.lb-profile-card { }
.lb-profile-top {
  display: flex; align-items: center; gap: 1rem; margin-bottom: 1.25rem;
}
.lb-avatar {
  width: 52px; height: 52px; border-radius: 50%; flex-shrink: 0;
  background: linear-gradient(135deg, var(--orange), var(--pink));
  display: flex; align-items: center; justify-content: center;
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 1.3rem; font-weight: 800; color: #fff;
}
.lb-profile-name   { font-size: 1rem; font-weight: 700; color: var(--text-primary); }
.lb-profile-handle { font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.15rem; }
.lb-profile-rank {
  margin-left: auto; font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 1.5rem; font-weight: 800; color: var(--orange);
}
.lb-profile-stats {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 0.65rem;
}
@media (max-width: 600px) { .lb-profile-stats { grid-template-columns: repeat(2,1fr); } }
.lb-pstat {
  background: var(--bg-surface); border: 1px solid var(--border);
  border-radius: var(--r-sm); padding: 0.75rem; text-align: center;
}
.lb-pval { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.1rem; font-weight: 800; color: var(--text-primary); }
.lb-plbl { font-size: 0.63rem; font-weight: 600; letter-spacing: 0.06em; color: var(--text-muted); text-transform: uppercase; margin-top: 0.15rem; }

.lb-table { display: flex; flex-direction: column; gap: 0; }
.lb-thead {
  display: grid;
  grid-template-columns: 54px 1fr 110px 90px 70px;
  padding: 0.5rem 0.75rem;
  border-bottom: 1px solid var(--border);
}
.lb-th {
  font-size: 0.62rem; font-weight: 700; letter-spacing: 0.08em;
  color: var(--text-muted); text-transform: uppercase;
}
.lb-row {
  display: grid;
  grid-template-columns: 54px 1fr 110px 90px 70px;
  padding: 0.85rem 0.75rem; align-items: center;
  border-bottom: 1px solid var(--border-soft);
  transition: background 0.15s;
}
.lb-row:last-child { border-bottom: none; }
.lb-row:hover { background: var(--bg-surface); }
.lb-row.lb-row-you {
  background: var(--orange-dim);
  border-color: var(--border-orange);
}
.lb-col-rank { display: flex; align-items: center; justify-content: center; }
.lb-medal    { font-size: 1.3rem; }
.lb-rank-num { font-size: 0.78rem; font-weight: 700; color: var(--text-secondary); }
.lb-col-name {
  display: flex; align-items: center; gap: 0.75rem;
}
.lb-row-avatar {
  width: 32px; height: 32px; border-radius: 50%;
  background: var(--bg-overlay); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); flex-shrink: 0;
}
.lb-row-you .lb-row-avatar {
  background: linear-gradient(135deg, var(--orange), var(--pink));
  color: #fff; border-color: transparent;
}
.lb-row-name { font-size: 0.82rem; font-weight: 700; color: var(--text-primary); }
.lb-row-sub  { font-size: 0.65rem; color: var(--text-secondary); margin-top: 0.1rem; }
.lb-col-pnl  { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.82rem; font-weight: 700; }
.lb-col-wr   { font-size: 0.82rem; font-weight: 600; color: var(--text-secondary); }
.lb-col-tr   { font-size: 0.78rem; color: var(--text-muted); }

@media (max-width: 640px) {
  .lb-thead, .lb-row { grid-template-columns: 44px 1fr 90px 70px; }
  .lb-col-tr { display: none; }
}

/* ═══════════════════════════════════════════════════════════
   SCREENSHOT ATTACHMENT (TRADE MODAL)
   ═══════════════════════════════════════════════════════════ */
.screenshot-drop {
  border: 1.5px dashed var(--border-bright); border-radius: var(--r-md);
  padding: 1.5rem 1rem; display: flex; flex-direction: column;
  align-items: center; justify-content: center; text-align: center;
  cursor: pointer; transition: all 0.2s; min-height: 100px;
  background: var(--bg-surface);
}
.screenshot-drop:hover,
.screenshot-drop.drag-over {
  border-color: var(--orange); background: var(--orange-dim);
  border-style: solid;
}
.screenshot-preview {
  border-radius: var(--r-md); overflow: hidden; position: relative;
  border: 1px solid var(--border);
}
.screenshot-preview img {
  width: 100%; display: block; max-height: 220px; object-fit: cover;
  cursor: zoom-in; transition: max-height 0.3s ease;
}
.screenshot-preview.expanded img { max-height: 600px; object-fit: contain; background: var(--bg-base); }
.screenshot-hint {
  font-size: 0.65rem; color: var(--text-muted); padding: 0.35rem; text-align: center;
  background: var(--bg-surface);
}
.screenshot-empty {
  font-size: 0.75rem; color: var(--text-muted); font-style: italic;
  padding: 0.75rem; background: var(--bg-surface); border-radius: var(--r-sm);
  text-align: center; border: 1px dashed var(--border);
}

/* ═══════════════════════════════════════════════════════════
   LIGHT THEME: NEW COMPONENTS
   ═══════════════════════════════════════════════════════════ */
[data-theme="light"] .goal-card      { background: #fff; }
[data-theme="light"] .alltime-stat   { background: var(--bg-elevated); }
[data-theme="light"] .rc-result-card { background: #fff; }
[data-theme="light"] .rc-empty       { background: #fff; }
[data-theme="light"] .screenshot-drop { background: var(--bg-elevated); }
[data-theme="light"] .lb-profile-card { background: #fff; }
[data-theme="light"] .lb-pstat        { background: var(--bg-elevated); }
[data-theme="light"] .lb-row:hover    { background: var(--bg-elevated); }
[data-theme="light"] .lb-row.lb-row-you { background: var(--orange-dim); }
[data-theme="light"] .onboarding-option { background: #fff; }
[data-theme="light"] .onboarding-option:hover { background: var(--orange-dim); }
[data-theme="light"] .form-range { background: #E8E0DC; }

/* ═══════════════════════════════════════════════════════════
   ANALYTICS CHARTS
   ═══════════════════════════════════════════════════════════ */
.chart-card-header {
  display: flex; justify-content: space-between; align-items: flex-start;
  margin-bottom: 1rem;
}
.chart-stat-val {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 1.3rem; font-weight: 800;
}
.chart-wrap {
  overflow: hidden; border-radius: var(--r-sm);
}

/* Two equal-width cards side by side */
.charts-row {
  display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;
  margin-bottom: 1rem;
}
@media (max-width: 860px) { .charts-row { grid-template-columns: 1fr; } }
.chart-half { /* inherits .card */ }

/* Donut */
.donut-wrap {
  display: flex; gap: 1.5rem; align-items: center; flex-wrap: wrap;
}
.donut-legend { flex: 1; min-width: 100px; display: flex; flex-direction: column; gap: 0.55rem; }
.donut-leg {
  display: flex; align-items: center; gap: 0.5rem;
  font-size: 0.78rem; color: var(--text-secondary);
}
.donut-leg.donut-divider {
  height: 1px; background: var(--border); margin: 0.2rem 0;
}
.donut-dot {
  width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0;
}
.donut-lbl { flex: 1; }
.donut-val { font-family: 'JetBrains Mono', monospace; font-weight: 600; font-size: 0.75rem; color: var(--text-primary); }

/* Strategy table */
.strategy-table { display: flex; flex-direction: column; }
.strat-thead {
  display: grid;
  grid-template-columns: 1fr 90px 60px 60px 1fr;
  padding: 0.5rem 0.6rem;
  border-bottom: 1px solid var(--border);
}
.strat-th {
  font-size: 0.6rem; font-weight: 700; letter-spacing: 0.08em;
  color: var(--text-muted); text-transform: uppercase;
}
.strat-row {
  display: grid;
  grid-template-columns: 1fr 90px 60px 60px 1fr;
  padding: 0.7rem 0.6rem; align-items: center;
  border-bottom: 1px solid var(--border-soft);
  transition: background 0.12s;
}
.strat-row:last-child { border-bottom: none; }
.strat-row:hover { background: var(--bg-surface); }
.strat-td { font-size: 0.78rem; }
.strat-name { font-weight: 700; color: var(--text-primary); }
.strat-bar-cell { display: flex; align-items: center; }
.strat-bar {
  height: 6px; border-radius: 3px; min-width: 4px; max-width: 100%;
  transition: width 0.4s ease;
}

/* ═══════════════════════════════════════════════════════════
   PWA INSTALL BANNER
   ═══════════════════════════════════════════════════════════ */
.pwa-banner {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 9999;
  background: var(--bg-card);
  border-top: 1px solid var(--border-orange);
  padding: 0.85rem 1.25rem;
  padding-bottom: calc(0.85rem + env(safe-area-inset-bottom));
  display: flex; align-items: center; gap: 0.875rem;
  box-shadow: 0 -4px 24px rgba(255,101,53,0.10);
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.34,1.1,0.64,1);
}
.pwa-banner.show { transform: translateY(0); }

@media (min-width: 768px) {
  .pwa-banner {
    max-width: 480px; left: 50%; right: auto;
    transform: translateX(-50%) translateY(100%);
    border-radius: var(--r-lg) var(--r-lg) 0 0;
    bottom: 0;
  }
  .pwa-banner.show { transform: translateX(-50%) translateY(0); }
}

.pwa-banner-icon {
  width: 40px; height: 40px; flex-shrink: 0; display: flex;
  align-items: center; justify-content: center; font-size: 1.5rem;
}
.pwa-banner-text { flex: 1; min-width: 0; }
.pwa-banner-title { font-size: 0.82rem; font-weight: 700; color: var(--text-primary); }
.pwa-banner-sub   { font-size: 0.68rem; color: var(--text-secondary); margin-top: 0.15rem; line-height: 1.45; }
.pwa-banner-actions { display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0; }
.pwa-install-btn  { white-space: nowrap; }
.pwa-dismiss-btn  {
  width: 28px; height: 28px; background: none; border: none;
  color: var(--text-muted); font-size: 0.9rem; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--r-sm); transition: color 0.15s, background 0.15s;
  flex-shrink: 0;
}
.pwa-dismiss-btn:hover { color: var(--text-primary); background: var(--bg-overlay); }

/* ── PWA banner light theme ── */
[data-theme="light"] .pwa-banner {
  background: #FFFFFF;
  border-top-color: rgba(232,80,30,0.18);
  box-shadow: 0 -4px 24px rgba(0,0,0,0.08);
}

/* ── Analytics light theme ── */
[data-theme="light"] .strat-row:hover { background: var(--bg-elevated); }

/* ═══════════════════════════════════════════════════════════
   MOBILE: bottom safe area fix for PWA
   ═══════════════════════════════════════════════════════════ */
@media (display-mode: standalone) {
  .main-content { padding-bottom: calc(80px + env(safe-area-inset-bottom)); }
  .mobile-topbar { padding-top: max(0.875rem, env(safe-area-inset-top)); }
}
